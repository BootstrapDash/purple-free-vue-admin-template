{"version":3,"file":"vue-trix.min.js","sources":["../src/mixins/EmitFileAccept.js","../src/mixins/EmitInitialize.js","../src/mixins/EmitAttachmentAdd.js","../src/mixins/EmitSelectionChange.js","../src/mixins/EmitAttachmentRemove.js","../src/mixins/EmitBeforeInitialize.js","../src/mixins/ProcessEditorFocusAndBlur.js","../node_modules/vue-runtime-helpers/dist/normalize-component.mjs","../node_modules/vue-runtime-helpers/dist/inject-style/browser.mjs","../src/components/VueTrix.vue","../src/index.js"],"sourcesContent":["/**\n *\n * @param {*} component\n */\nexport default function (component) {\n  return {\n    methods: {\n      emitFileAccept (file) {\n        this.$emit('trix-file-accept', file)\n      }\n    }\n  }\n}\n","/**\n *\n * @param {*} component\n */\nexport default function (component) {\n  return {\n    methods: {\n      emitInitialize (editor) {\n        this.$emit('trix-initialize', this.$refs.trix.editor, event)\n      }\n    }\n  }\n}\n","/**\n *\n * @param {*} component\n */\nexport default function (component) {\n  return {\n    methods: {\n      emitAttachmentAdd (file) {\n        this.$emit('trix-attachment-add', file)\n      }\n    }\n  }\n}\n","/**\n *\n * @param {*} component\n */\nexport default function (component) {\n  return {\n    methods: {\n      emitSelectionChange (event) {\n        this.$emit('trix-selection-change', this.$refs.trix.editor, event)\n      }\n    }\n  }\n}\n","/**\n *\n * @param {*} component\n */\nexport default function (component) {\n  return {\n    methods: {\n      emitAttachmentRemove (file) {\n        this.$emit('trix-attachment-remove', file)\n      }\n    }\n  }\n}\n","/**\n *\n * @param {*} component\n */\nexport default function (component) {\n  return {\n    methods: {\n      emitBeforeInitialize (event) {\n        this.$emit('trix-before-initialize', this.$refs.trix.editor, event)\n      }\n    }\n  }\n}\n","export default function (component) {\n  return {\n    methods: {\n      processTrixFocus (event) {\n        if (this.$refs.trix) {\n          this.isActived = true\n          this.$emit('trix-focus', this.$refs.trix.editor, event)\n        }\n      },\n      processTrixBlur (event) {\n        if (this.$refs.trix) {\n          this.isActived = false\n          this.$emit('trix-blur', this.$refs.trix.editor, event)\n        }\n      }\n    }\n  }\n}\n","function normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\r\n    if (typeof shadowMode !== 'boolean') {\r\n        createInjectorSSR = createInjector;\r\n        createInjector = shadowMode;\r\n        shadowMode = false;\r\n    }\r\n    // Vue.extend constructor export interop.\r\n    const options = typeof script === 'function' ? script.options : script;\r\n    // render functions\r\n    if (template && template.render) {\r\n        options.render = template.render;\r\n        options.staticRenderFns = template.staticRenderFns;\r\n        options._compiled = true;\r\n        // functional template\r\n        if (isFunctionalTemplate) {\r\n            options.functional = true;\r\n        }\r\n    }\r\n    // scopedId\r\n    if (scopeId) {\r\n        options._scopeId = scopeId;\r\n    }\r\n    let hook;\r\n    if (moduleIdentifier) {\r\n        // server build\r\n        hook = function (context) {\r\n            // 2.3 injection\r\n            context =\r\n                context || // cached call\r\n                    (this.$vnode && this.$vnode.ssrContext) || // stateful\r\n                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional\r\n            // 2.2 with runInNewContext: true\r\n            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\r\n                context = __VUE_SSR_CONTEXT__;\r\n            }\r\n            // inject component styles\r\n            if (style) {\r\n                style.call(this, createInjectorSSR(context));\r\n            }\r\n            // register component module identifier for async chunk inference\r\n            if (context && context._registeredComponents) {\r\n                context._registeredComponents.add(moduleIdentifier);\r\n            }\r\n        };\r\n        // used by ssr in case component is cached and beforeCreate\r\n        // never gets called\r\n        options._ssrRegister = hook;\r\n    }\r\n    else if (style) {\r\n        hook = shadowMode\r\n            ? function (context) {\r\n                style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));\r\n            }\r\n            : function (context) {\r\n                style.call(this, createInjector(context));\r\n            };\r\n    }\r\n    if (hook) {\r\n        if (options.functional) {\r\n            // register for functional component in vue file\r\n            const originalRender = options.render;\r\n            options.render = function renderWithStyleInjection(h, context) {\r\n                hook.call(context);\r\n                return originalRender(h, context);\r\n            };\r\n        }\r\n        else {\r\n            // inject component registration as beforeCreate hook\r\n            const existing = options.beforeCreate;\r\n            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\r\n        }\r\n    }\r\n    return script;\r\n}\n\nexport default normalizeComponent;\n//# sourceMappingURL=normalize-component.mjs.map\n","const isOldIE = typeof navigator !== 'undefined' &&\r\n    /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\r\nfunction createInjector(context) {\r\n    return (id, style) => addStyle(id, style);\r\n}\r\nlet HEAD;\r\nconst styles = {};\r\nfunction addStyle(id, css) {\r\n    const group = isOldIE ? css.media || 'default' : id;\r\n    const style = styles[group] || (styles[group] = { ids: new Set(), styles: [] });\r\n    if (!style.ids.has(id)) {\r\n        style.ids.add(id);\r\n        let code = css.source;\r\n        if (css.map) {\r\n            // https://developer.chrome.com/devtools/docs/javascript-debugging\r\n            // this makes source maps inside style tags work properly in Chrome\r\n            code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */';\r\n            // http://stackoverflow.com/a/26603875\r\n            code +=\r\n                '\\n/*# sourceMappingURL=data:application/json;base64,' +\r\n                    btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) +\r\n                    ' */';\r\n        }\r\n        if (!style.element) {\r\n            style.element = document.createElement('style');\r\n            style.element.type = 'text/css';\r\n            if (css.media)\r\n                style.element.setAttribute('media', css.media);\r\n            if (HEAD === undefined) {\r\n                HEAD = document.head || document.getElementsByTagName('head')[0];\r\n            }\r\n            HEAD.appendChild(style.element);\r\n        }\r\n        if ('styleSheet' in style.element) {\r\n            style.styles.push(code);\r\n            style.element.styleSheet.cssText = style.styles\r\n                .filter(Boolean)\r\n                .join('\\n');\r\n        }\r\n        else {\r\n            const index = style.ids.size - 1;\r\n            const textNode = document.createTextNode(code);\r\n            const nodes = style.element.childNodes;\r\n            if (nodes[index])\r\n                style.element.removeChild(nodes[index]);\r\n            if (nodes.length)\r\n                style.element.insertBefore(textNode, nodes[index]);\r\n            else\r\n                style.element.appendChild(textNode);\r\n        }\r\n    }\r\n}\n\nexport default createInjector;\n//# sourceMappingURL=browser.mjs.map\n","<template>\n  <div :class=\"[$style.trix_container]\">\n    <trix-editor\n      :contenteditable=\"!disabledEditor\"\n      :class=\"['trix-content']\"\n      ref=\"trix\"\n      :input=\"computedId\"\n      :placeholder=\"placeholder\"\n      @trix-change=\"handleContentChange\"\n      @trix-file-accept=\"emitFileAccept\"\n      @trix-attachment-add=\"emitAttachmentAdd\"\n      @trix-attachment-remove=\"emitAttachmentRemove\"\n      @trix-selection-change=\"emitSelectionChange\"\n      @trix-initialize=\"handleInitialize\"\n      @trix-before-initialize=\"emitBeforeInitialize\"\n      @trix-focus=\"processTrixFocus\"\n      @trix-blur=\"processTrixBlur\"\n    />\n    <input\n      type=\"hidden\"\n      :name=\"inputName\"\n      :id=\"computedId\"\n      :value=\"editorContent\"\n    />\n  </div>\n</template>\n\n<script>\nimport Trix from 'trix'\nimport 'trix/dist/trix.css'\nimport EmitFileAccept from '../mixins/EmitFileAccept.js'\nimport EmitInitialize from '../mixins/EmitInitialize.js'\nimport EmitAttachmentAdd from '../mixins/EmitAttachmentAdd.js'\nimport EmitSelectionChange from '../mixins/EmitSelectionChange.js'\nimport EmitAttachmentRemove from '../mixins/EmitAttachmentRemove.js'\nimport EmitBeforeInitialize from '../mixins/EmitBeforeInitialize.js'\nimport ProcessEditorFocusAndBlur from '../mixins/ProcessEditorFocusAndBlur.js'\n\nexport default {\n  name: 'vue-trix',\n  mixins: [\n    EmitFileAccept(),\n    EmitInitialize(),\n    EmitAttachmentAdd(),\n    EmitSelectionChange(),\n    EmitAttachmentRemove(),\n    EmitBeforeInitialize(),\n    ProcessEditorFocusAndBlur()\n  ],\n  model: {\n    prop: 'srcContent',\n    event: 'update'\n  },\n  props: {\n    /**\n     * This prop will put the editor in read-only mode\n     */\n    disabledEditor: {\n      type: Boolean,\n      required: false,\n      default () {\n        return false\n      }\n    },\n    /**\n     * This is referenced `id` of the hidden input field defined.\n     * It is optional and will be a random string by default.\n     */\n    inputId: {\n      type: String,\n      required: false,\n      default () {\n        return ''\n      }\n    },\n    /**\n     * This is referenced `name` of the hidden input field defined,\n     * default value is `content`.\n     */\n    inputName: {\n      type: String,\n      required: false,\n      default () {\n        return 'content'\n      }\n    },\n    /**\n     * The placeholder attribute specifies a short hint\n     * that describes the expected value of a editor.\n     */\n    placeholder: {\n      type: String,\n      required: false,\n      default () {\n        return ''\n      }\n    },\n    /**\n     * The source content is associcated to v-model directive.\n     */\n    srcContent: {\n      type: String,\n      required: false,\n      default () {\n        return ''\n      }\n    },\n    /**\n     * The boolean attribute allows saving editor state into browser's localStorage\n     * (optional, default is `false`).\n     */\n    localStorage: {\n      type: Boolean,\n      required: false,\n      default () {\n        return false\n      }\n    },\n    /**\n     * Focuses cursor in the editor when attached to the DOM\n     * (optional, default is `false`).\n     */\n    autofocus: {\n      type: Boolean,\n      required: false,\n      default () {\n        return false\n      }\n    },\n    /**\n     * Object to override default editor configuration\n     */\n    config: {\n      type: Object,\n      required: false,\n      default () {\n        return {}\n      }\n    }\n  },\n  mounted () {\n    /** Override editor configuration */\n    this.overrideConfig(this.config)\n    /** Check if editor read-only mode is required */\n    this.decorateDisabledEditor(this.disabledEditor)\n    this.$nextTick(() => {\n      /**\n       *  If localStorage is enabled,\n       *  then load editor's content from the beginning.\n       */\n      if (this.localStorage) {\n        const savedValue = localStorage.getItem(this.storageId('VueTrix'))\n        if (savedValue && !this.srcContent) {\n          this.$refs.trix.editor.loadJSON(JSON.parse(savedValue))\n        }\n      }\n    })\n  },\n  data () {\n    return {\n      editorContent: this.srcContent,\n      isActived: null\n    }\n  },\n  methods: {\n    handleContentChange (event) {\n      this.editorContent = event.srcElement ? event.srcElement.value : event.target.value\n      this.$emit('input', this.editorContent)\n    },\n    handleInitialize (event) {\n      /**\n       * If autofocus is true, manually set focus to\n       * beginning of content (consistent with Trix behavior)\n       */\n      if (this.autofocus) {\n        this.$refs.trix.editor.setSelectedRange(0)\n      }\n\n      this.$emit('trix-initialize', this.emitInitialize)\n    },\n    handleInitialContentChange (newContent, oldContent) {\n      newContent = newContent === undefined ? '' : newContent\n\n      if (this.$refs.trix.editor && this.$refs.trix.editor.innerHTML !== newContent) {\n        /* Update editor's content when initial content changed */\n        this.editorContent = newContent\n\n        /**\n         *  If user are typing, then don't reload the editor,\n         *  hence keep cursor's position after typing.\n         */\n        if (!this.isActived) {\n          this.reloadEditorContent(this.editorContent)\n        }\n      }\n    },\n    emitEditorState (value) {\n      /**\n       * If localStorage is enabled,\n       * then save editor's content into storage\n       */\n      if (this.localStorage) {\n        localStorage.setItem(\n          this.storageId('VueTrix'),\n          JSON.stringify(this.$refs.trix.editor)\n        )\n      }\n      this.$emit('update', this.editorContent)\n    },\n    storageId (component) {\n      if (this.inputId) {\n        return `${component}.${this.inputId}.content`\n      } else {\n        return `${component}.content`\n      }\n    },\n    reloadEditorContent (newContent) {\n      // Reload HTML content\n      this.$refs.trix.editor.loadHTML(newContent)\n\n      // Move cursor to end of new content updated\n      this.$refs.trix.editor.setSelectedRange(this.getContentEndPosition())\n    },\n    getContentEndPosition () {\n      return this.$refs.trix.editor.getDocument().toString().length - 1\n    },\n    decorateDisabledEditor (editorState) {\n      /** Disable toolbar and editor by pointer events styling */\n      if (editorState) {\n        this.$refs.trix.toolbarElement.style['pointer-events'] = 'none'\n        this.$refs.trix.contentEditable = false\n        this.$refs.trix.style['background'] = '#e9ecef'\n      } else {\n        this.$refs.trix.toolbarElement.style['pointer-events'] = 'unset'\n        this.$refs.trix.style['pointer-events'] = 'unset'\n        this.$refs.trix.style['background'] = 'transparent'\n      }\n    },\n    overrideConfig (config) {\n      Trix.config = this.deepMerge(Trix.config, config)\n    },\n    deepMerge (target, override) {\n      // deep merge the object into the target object\n      for (let prop in override) {\n        if (override.hasOwnProperty(prop)) {\n          if (Object.prototype.toString.call(override[prop]) === '[object Object]') {\n            // if the property is a nested object\n            target[prop] = this.deepMerge(target[prop], override[prop])\n          } else {\n            // for regular property\n            target[prop] = override[prop]\n          }\n        }\n      }\n\n      return target\n    }\n  },\n  computed: {\n    /**\n     * Compute a random id of hidden input\n     * when it haven't been specified.\n     */\n    generateId () {\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n        var r = Math.random() * 16 | 0\n        var v = c === 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n      })\n    },\n    computedId () {\n      return this.inputId || this.generateId\n    },\n    initialContent () {\n      return this.srcContent\n    },\n    isDisabled () {\n      return this.disabledEditor\n    }\n  },\n  watch: {\n    editorContent: {\n      handler: 'emitEditorState'\n    },\n    initialContent: {\n      handler: 'handleInitialContentChange'\n    },\n    isDisabled: {\n      handler: 'decorateDisabledEditor'\n    },\n    config: {\n      handler: 'overrideConfig',\n      deep: true\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" module>\n.trix_container {\n  max-width: 100%;\n  height: auto;\n}\n.trix_container .trix-button-group {\n  background-color: white;\n}\n.trix_container .trix-content {\n  background-color: white;\n}\n</style>\n","/*\n * Vue-Trix index.js\n * Author: tranduchanh.ms@gmail.com\n * Github: https://github.com/hanhdt/vue-trix\n */\n\nimport Vue from 'vue'\nimport VueTrix from './components/VueTrix.vue'\nVue.config.ignoredElements = ['trix-editor']\n\nVue.component(VueTrix.name, VueTrix)\n\nexport default VueTrix\n"],"names":["methods","emitFileAccept","file","this","$emit","emitInitialize","$refs","trix","editor","event","emitAttachmentAdd","emitSelectionChange","emitAttachmentRemove","emitBeforeInitialize","processTrixFocus","isActived","processTrixBlur","normalizeComponent","template","style","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","const","hook","options","render","staticRenderFns","_compiled","functional","_scopeId","context","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","h","existing","beforeCreate","concat","HEAD","isOldIE","navigator","test","userAgent","toLowerCase","id","css","group","media","styles","ids","Set","has","let","code","source","map","sources","btoa","unescape","encodeURIComponent","JSON","stringify","element","document","createElement","type","setAttribute","undefined","head","getElementsByTagName","appendChild","push","styleSheet","cssText","filter","Boolean","join","index","size","textNode","createTextNode","nodes","childNodes","removeChild","length","insertBefore","addStyle","Vue","config","ignoredElements","component","VueTrix","name"],"mappings":"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"}